<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Title -->
    <title>
        PhotoBooth Hoàng Nam
    </title>

    <!-- Meta Description for SEO -->
    <meta name="description"
    content="Hoàng Nam Nion - Trải nghiệm chụp photobooth online độc đáo">

    <!-- Meta Keywords -->
    <meta name="keywords"
    content="Tất Cả Free ">

    <!-- Meta Author -->
    <meta name="author" content="Hoàng Nam Nion">

    <!-- Meta for Facebook Open Graph -->
    <meta property="og:title" content="Hoàng Nam Nion - Photobooth Online Sáng Tạo ">
    <meta property="og:description"
    content="">
    <meta property="og:image" content="/images/logo.png">
    <meta property="og:url" content="Free Không Lấy Phí">
    <meta property="og:type" content="website">

    <!-- Meta for Twitter Cards -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Hoàng Nam Nion - Chụp Photobooth Online & Xem Tarot Online">
    <meta name="twitter:description"
    content="Khám phá niềm vui chụp ảnh với photobooth online ">
    <meta name="twitter:image" content="/images/logo.png">

    <!-- Favicon -->
    <link rel="shortcut icon" href="/icon/favicon.png" type="image/x-icon">

    <!-- Custom Stylesheets -->
    <link rel="stylesheet" href="css/layout.css">

    <meta name="google-adsense-account" content="ca-pub-8758740316724192">

    <script async src="https://www.googletagmanager.com/gtag/scripts?id=G-HRVTHQCGLC"></script>
    <script nonce="Ir3XLmgiOltPKaYUzkz4rw==">
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('scripts', new Date());

        gtag('config', 'G-HRVTHQCGLC');
    </script>

</head>

<body>
    <style>
    header {
        width: 100%;
        position: relative;
        background-color: transparent;
        padding: 10px 50px;
        display: flex;
        align-items: center;
    }

    #app-logo {
        height: 40px;
        cursor: pointer;
        transition: .3s ease-in-out;
        user-select: none;
    }

    #app-logo:hover {
        transform: scale(1.1);
    }

    /* Menu trên desktop */
    #header-button-container {
        margin-left: auto;
        display: flex;
        gap: 20px;
    }

    #header-button-container a {
        text-decoration: none;
        color: #333;
        font-size: 16px;
        font-weight: 500;
    }

    #header-button-container a:hover {
        text-decoration: underline;
    }

    .mobile-menu-button {
        width: 40px;
        height: 40px;
        display: none;
        margin-left: auto;
        border: none;
        cursor: pointer;
        background-color: transparent !important;
        padding: 0 !important;
    }

    .mobile-menu-button svg {
        width: 100%;
        height: 100%;
        fill: #333;
    }

    #close-menu {
        display: none;
    }

    @media (max-width: 1000px) {
        #header-button-container {
            display: flex;
            flex-direction: column;
            position: fixed;
            top: 0;
            right: 0;
            width: 100%;
            height: 100vh;
            background: url('/images/chill.jpg') no-repeat center center fixed;
            background-size: cover;
            padding: 20px;
            transform: translateX(100%);
            transition: transform 0.3s ease-out;
            z-index: 9999;
            gap: 20px;
        }

        #header-button-container.active {
            transform: translateX(0);
        }

        #header-button-container a {
            text-decoration: none;
            color: #fff;
            font-size: 20px;
            font-weight: 700;
            width: 100%;
        }

        .mobile-menu-button {
            display: block;
        }

        #close-menu {
            display: block;
            width: 40px;
            height: 40px;
            border: none;
            background-color: transparent;
            cursor: pointer;
            margin-left: auto;
            margin-bottom: 50px;
            padding: 0 !important;
        }

        #close-menu svg {
            fill: #fff;
            width: 100%;
            height: 100%;
        }

        header {
            padding: 5px 10px;
            position: sticky;
            top: 0;
            z-index: 999;
            transition: background-color 0.3s ease-in-out;
        }
    }

    @keyframes pulse {
      0% {
        transform: scale(1);
      }
      50% {
        transform: scale(1.05);
      }
      100% {
        transform: scale(1);
      }
    }

    #captureBtn {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        background: linear-gradient(45deg, #ff6b6b, #ff8e8e);
        color: white;
        font-size: 14px;
        border: 2px solid white;
        outline: 4px solid #ff6b6b;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 0 15px rgba(255, 107, 107, 0.4);
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
    }

    #captureBtn:hover {
        transform: scale(1.05);
        box-shadow: 0 0 40px rgba(255, 107, 107, 0.6);
    }

    #captureBtn:active {
        transform: scale(0.95);
        box-shadow: 0 0 20px rgba(255, 107, 107, 0.3);
    }

    #captureBtn::before {
        content: '';
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: radial-gradient(circle, rgba(255,255,255,0.2) 0%, rgba(255,255,255,0) 70%);
        transform: rotate(45deg);
        transition: all 0.3s ease;
    }

    #captureBtn:hover::before {
        transform: rotate(45deg) translate(30%, 30%);
    }

    #captureBtn::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        border-radius: 50%;
        background: radial-gradient(circle at center, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 70%);
        transition: all 0.3s ease;
    }

    #captureBtn:hover::after {
        background: radial-gradient(circle at center, rgba(255,255,255,0.2) 0%, rgba(255,255,255,0) 70%);
    }

    /* Countdown styles */
    #countdown {
      position: absolute;
      top: 50%;
      left: 100%;
      transform: translate(-50%, -50%);
      font-size: 0;
      z-index: 100;
      pointer-events: none;
    }

    .countdown-circle {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.4);
      display: flex;
      align-items: center;
      justify-content: center;
      color: #ff6b6b;
      font-size: 18px;
      font-weight: bold;
      box-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
      animation: countdownPulse 1s ease-in-out infinite;
      pointer-events: none;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
      border: 1.5px solid rgba(255, 255, 255, 0.5);
    }

    @keyframes countdownPulse {
      0% {
        transform: scale(1);
        opacity: 0.6;
      }
      50% {
        transform: scale(1.05);
        opacity: 0.4;
      }
      100% {
        transform: scale(1);
        opacity: 0.6;
      }
    }

    /* Flash effect */
    .flash {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: white;
      opacity: 0;
      pointer-events: none;
      z-index: 99;
      transition: opacity 0.3s ease-out;
    }

    @keyframes flash {
      0% {
        opacity: 0;
      }
      50% {
        opacity: 1;
      }
      100% {
        opacity: 0;
      }
    }
</style>

<header id="header">
    <img src="/images/logo.png" alt="App logo" id="app-logo">
    <!-- Nút hamburger hiển thị trên mobile -->
    <button class="mobile-menu-button" id="mobile-menu-toggle" aria-label="Mở menu">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M4 6h16v2H4zm0 5h16v2H4zm0 5h16v2H4z"></path>
        </svg>
    </button>

    <div id="header-button-container">
        <button id="close-menu" aria-label="Close mobile menu">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"/></svg>        
        </button>
        
        <a href="#">Photobooth</a>
        <a href="#">Tarot</a>
        <a href="#" onclick="showProfile()">Trang cá nhân</a>
        <a href="deposit.html" style="color: #ff6b6b; font-weight: bold;">Nạp tiền</a>
        <div id="balance-display" style="color: #4CAF50; font-weight: bold; padding: 5px 10px; background: rgba(255, 255, 255, 0.8); border-radius: 5px; margin: 0 10px;">
            Số dư: <span id="current-balance">0</span>đ
        </div>
        <a href="#" onclick="logout()">Đăng xuất</a>
    </div>
</header>

<script src="scripts/partials/header.js"></script>

    <main>
        <link rel="stylesheet" href="css/4_images.css">

<meta name="robots" content="noindex">

<div class="cute-container">
  <h1 id="h1Balance" data-balance="0" style="width: 100%; text-align: center; font-size: 30px;">PhotoBooth Hoàng Nam</h1>

  <div style="position: relative; width: 100%; max-width: 600px; margin: 20px auto;">
    <video id="video" autoplay playsinline muted style="width: 100%; border-radius: 20px; overflow: hidden; border: 4px solid #ff6b6b; box-shadow: 0 0 20px rgba(255, 107, 107, 0.3);"></video>
    <div id="countdown"></div>
    <div id="spinner"></div>
  </div>

  <div style="display: flex; gap: 15px; position: relative; margin: 10px auto; width: fit-content; flex-wrap: wrap; justify-content: center; align-items: center;">
    <div style="display: flex; gap: 15px; margin-left: -40px;">
      <button class="function-button" id="uploadBtn" style="width: 50px; height: 50px; padding: 0; border: none; background: transparent; cursor: pointer;">
        <img src="/images/ablum.png" alt="Upload ảnh" style="width: 100%; height: 100%; object-fit: contain;">
      </button>
      <input type="file" id="uploadInput" accept="image/*" multiple>
    </div>

    <button class="function-button" id="captureBtn" style="width: 100px; height: 100px; border-radius: 50%; background-color: white; color: black; font-size: 18px; border: 4px solid black; outline: 8px solid #FFD700; cursor: pointer; display: flex; align-items: center; justify-content: center; box-shadow: 0 0 30px rgba(255, 215, 0, 0.4); transition: all 0.3s ease; position: relative; overflow: hidden;"></button>

    <div style="display: flex; gap: 15px;">
      <button class="function-button" id="flipCamBtn" style="width: 50px; height: 50px; padding: 0; border: none; background: transparent; cursor: pointer;">
        <img src="/images/latcam.png" alt="Lật camera" style="width: 100%; height: 100%; object-fit: contain;">
      </button>
      <button class="function-button" id="switchCamBtn" style="width: 50px; height: 50px; padding: 0; border: none; background: transparent; cursor: pointer;">
        <img src="/images/doicam.png" alt="Đổi camera" style="width: 100%; height: 100%; object-fit: contain;">
      </button>
    </div>
  </div>

  <div class="option-container">
    <label for="captureCount">Chọn số lượng ảnh chụp tự động:</label>
    <select id="captureCount">
      <option value="4" selected>4</option>
      <option value="8">8</option>
    </select>
  </div>
  
  <div class="option-container">
    <label for="captureTime">Chọn thời gian chụp mỗi ảnh (giây):</label>
    <select id="captureTime">
      <option value="0" selected>Chụp luôn</option>
      <option value="3">3</option>
      <option value="5">5</option>
      <option value="10">10</option>
      <option value="15">15</option>
    </select>
  </div>

  <div style="margin-top: 15px;">
    <h2>Ảnh Preview:</h2>
    <p>Nhấn vào ảnh để chọn hoặc hủy chọn ảnh muốn xuất (chọn đúng 4 ảnh).<br>
      Lưu ý: Ảnh được upload sẽ hiển thị chữ "UPLOAD" và không có video!
    </p>
    <div id="previewImages"></div>
  </div>

  <!-- Phần chọn Frame: hiển thị dãy hình ảnh -->
  <div id="frameOptionsContainer" style="margin-top: 15px;">
    <h3>Chọn Frame (chỉ ảnh xuất có frame, video xuất không có frame):</h3>
    <div id="frameOptions">
      <img src="/images/basic-1.png" alt="Basic 1" class="frame-option selected" data-frame-url="/images/basic-1.png">
      <img src="/images/basic-2.png" alt="Basic 2" class="frame-option" data-frame-url="/images/basic-2.png">
      <img src="/images/basic-3.png" alt="Basic 3" class="frame-option" data-frame-url="/images/basic-3.png">
      <img src="/images/basic-4.png" alt="Basic 4" class="frame-option" data-frame-url="/images/basic-4.png">
      <img src="/images/basic-5.png" alt="Basic 5" class="frame-option" data-frame-url="/images/basic-5.png">

      <img src="/images/cute-1.png" alt="Cute 1" class="frame-option" data-frame-url="/images/cute-1.png">
      <img src="/images/cute-2.png" alt="Cute 2" class="frame-option" data-frame-url="/images/cute-2.png">
      <img src="/images/cute-3.png" alt="Cute 3" class="frame-option" data-frame-url="/images/cute-3.png">
      <img src="/images/cute-4.png" alt="Cute 4" class="frame-option" data-frame-url="/images/cute-4.png">
      <img src="/images/cute-5.png" alt="Cute 5" class="frame-option" data-frame-url="/images/cute-5.png">
      <img src="/images/cute-6.png" alt="Cute 6" class="frame-option" data-frame-url="/images/cute-6.png">
      <img src="/images/cute-7.png" alt="Cute 7" class="frame-option" data-frame-url="/images/cute-7.png">


      <img src="/images/vietnam-1.png" alt="Vietnam 1" class="frame-option" data-frame-url="/images/vietnam-1.png">
      <img src="/images/vietnam-2.png" alt="Vietnam 2" class="frame-option" data-frame-url="/images/vietnam-2.png">
    </div>
  </div>

  <!-- Khu vực xem trước kết quả ghép -->
  <div id="templatePreviewContainer">
    <h2 style="font-size: 25px; width: 100%; text-align: center;">Xem trước kết quả</h2>
    <canvas id="templatePreview" style="border: none;"></canvas>
  </div>

  <div style="width: fit-content; margin: 10px auto; display: flex; gap: 15px;">
    <button class="function-button" id="exportBtn">Xuất ảnh (Ghép)</button>
    <button class="function-button" id="exportVideoBtn">Xuất video (Ghép)</button>
  </div>

  <audio id="captureSound" src="/audio/capture_sound.mp3"></audio>

  <!-- Modal xuất video -->
  <div id="videoExportModal" class="modal">
    <div class="modal-content">
      <h2>Xuất video</h2>
      <p id="modalMessage">
        Xuất video sẽ mất 2000 đồng.<br>
        <strong>Lưu ý:</strong> Video được xuất <u>không có frame</u>.<br>
        Số dư hiện tại: <span id="currentBalance">0</span> đồng.
      </p>
      <div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap; width: 100%; margin-top: 15px;">
        <button class="function-button" id="youtubeSignupBtn">Đăng ký Youtube</button>
        <button class="function-button" id="hihiBtn">Xin Admin :>>></button>
        <button class="function-button" id="rechargeBtn">Nạp thêm</button>
        <button class="function-button" id="confirmExportBtn">Đồng ý xuất</button>
        <button class="function-button" id="cancelExportBtn">Từ chối xuất</button>
      </div>
    </div>
  </div>
</div>

<script src="/scripts/4_images.js"></script>
<script src="/scripts/balance.js"></script>
    </main>

    <style>
    footer {
        width: 100%;
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 30px 50px;
    }

    #footer-logo {
        height: 100px;
        object-fit: cover;
        cursor: pointer;
    }

    .social-links {
        position: relative;
        display: flex;
        gap: 10px;
    }

    .social-links a {
        text-decoration: none;
    }

    .social-links a svg {
        fill: #333;
        width: 50px;
        height: 50px;
        transition: background .3s ease-in-out;
        padding: 5px;
        border-radius: 50%;
    }

    .social-links a:hover svg {
        background-color: #333;
        fill: #fff;
    }

    @media (max-width: 1000px) {
        footer {
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            gap: 15px;
        }
    }
</style>

<footer>
    <img alt="Footer logo" src="/images/logo.png" id="footer-logo" aria-label="Go to Homepage">
    <div class="social-links">
        <a href="https://www.facebook.com/profile.php?id=61563535470440" target="_blank" aria-label="Facebook Fanpage">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M13.397 20.997v-8.196h2.765l.411-3.209h-3.176V7.548c0-.926.258-1.56 1.587-1.56h1.684V3.127A22.336 22.336 0 0 0 14.201 3c-2.444 0-4.122 1.492-4.122 4.231v2.355H7.332v3.209h2.753v8.202h3.312z"></path></svg>
        </a>
        <a href="https://www.facebook.com/cao.vannam.26042k5/" target="_blank" aria-label="Facebook Group">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M9.5 12c2.206 0 4-1.794 4-4s-1.794-4-4-4-4 1.794-4 4 1.794 4 4 4zm1.5 1H8c-3.309 0-6 2.691-6 6v1h15v-1c0-3.309-2.691-6-6-6z"></path><path d="M16.604 11.048a5.67 5.67 0 0 0 .751-3.44c-.179-1.784-1.175-3.361-2.803-4.44l-1.105 1.666c1.119.742 1.8 1.799 1.918 2.974a3.693 3.693 0 0 1-1.072 2.986l-1.192 1.192 1.618.475C18.951 13.701 19 17.957 19 18h2c0-1.789-.956-5.285-4.396-6.952z"></path></svg>
        </a>
        <a href="https://www.youtube.com/@CaoVanNam-xn5mb" target="_blank" aria-label="YouTube Channel">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M21.593 7.203a2.506 2.506 0 0 0-1.762-1.766C18.265 5.007 12 5 12 5s-6.264-.007-7.831.404a2.56 2.56 0 0 0-1.766 1.778c-.413 1.566-.417 4.814-.417 4.814s-.004 3.264.406 4.814c.23.857.905 1.534 1.763 1.765 1.582.43 7.83.437 7.83.437s6.265.007 7.831-.403a2.515 2.515 0 0 0 1.767-1.763c.414-1.565.417-4.812.417-4.812s.02-3.265-.407-4.831zM9.996 15.005l.005-6 5.207 3.005-5.212 2.995z"></path></svg>
        </a>
        <a href="https://www.tiktok.com/@nam_26th4" aria-label="TikTok Channel">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-5.2 1.74 2.89 2.89 0 0 1 2.31-4.64 2.93 2.93 0 0 1 .88.13V9.4a6.84 6.84 0 0 0-1-.05A6.33 6.33 0 0 0 5 20.1a6.34 6.34 0 0 0 10.86-4.43v-7a8.16 8.16 0 0 0 4.77 1.52v-3.4a4.85 4.85 0 0 1-1-.1z"></path></svg>
        </a>
        <a href="#" target="_blank" aria-label="Join our Discord">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M14.82 4.26a10.14 10.14 0 0 0-.53 1.1 14.66 14.66 0 0 0-4.58 0 10.14 10.14 0 0 0-.53-1.1 16 16 0 0 0-4.13 1.3 17.33 17.33 0 0 0-3 11.59 16.6 16.6 0 0 0 5.07 2.59A12.89 12.89 0 0 0 8.23 18a9.65 9.65 0 0 1-1.71-.83 3.39 3.39 0 0 0 .42-.33 11.66 11.66 0 0 0 10.12 0q.21.18.42.33a10.84 10.84 0 0 1-1.71.84 12.41 12.41 0 0 0 1.08 1.78 16.44 16.44 0 0 0 5.06-2.59 17.22 17.22 0 0 0-3-11.59 16.09 16.09 0 0 0-4.09-1.35zM8.68 14.81a1.94 1.94 0 0 1-1.8-2 1.93 1.93 0 0 1 1.8-2 1.93 1.93 0 0 1 1.8 2 1.93 1.93 0 0 1-1.8 2zm6.64 0a1.94 1.94 0 0 1-1.8-2 1.93 1.93 0 0 1 1.8-2 1.92 1.92 0 0 1 1.8 2 1.92 1.92 0 0 1-1.8 2z"></path></svg>
        </a>
    </div>
</footer>

<script src="/scripts/partials/footer.js"></script>
<script src="/scripts/security.js"></script>
</body>

<script src="/scripts/layout.js"></script>

<script>
    // Hiển thị số dư tài khoản
    function updateBalanceDisplay() {
        try {
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            if (currentUser) {
                const users = JSON.parse(localStorage.getItem('users')) || [];
                const user = users.find(u => u.id === currentUser.id);
                if (user) {
                    const balance = user.balance.toLocaleString();
                    document.getElementById('current-balance').textContent = balance;
                    document.getElementById('currentBalance').textContent = balance;
                }
            }
        } catch (error) {
            console.error('Lỗi khi cập nhật số dư:', error);
        }
    }

    // Hiển thị thông tin tài khoản
    function showProfile() {
        const currentUser = JSON.parse(localStorage.getItem('currentUser'));
        if (currentUser) {
            const users = JSON.parse(localStorage.getItem('users')) || [];
            const user = users.find(u => u.id === currentUser.id);
            if (user) {
                const profileInfo = `
                    <div style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); 
                        background: white; padding: 20px; border-radius: 10px; box-shadow: 0 0 20px rgba(0,0,0,0.2);
                        z-index: 10000; max-width: 400px; width: 90%;">
                        <h2 style="text-align: center; margin-bottom: 20px;">Thông tin tài khoản</h2>
                        <div style="margin-bottom: 15px;">
                            <strong>Tên đăng nhập:</strong> ${user.username}
                        </div>
                        <div style="margin-bottom: 15px;">
                            <strong>Email:</strong> ${user.email}
                        </div>
                        <div style="margin-bottom: 15px;">
                            <strong>Số dư:</strong> ${user.balance.toLocaleString()}đ
                        </div>
                        <div style="margin-bottom: 15px;">
                            <strong>ID tài khoản:</strong> ${user.id}
                        </div>
                        
                        <div style="margin: 20px 0; border-top: 1px solid #eee; padding-top: 20px;">
                            <h3 style="text-align: center; margin-bottom: 15px;">Đổi tên đăng nhập</h3>
                            <div style="margin-bottom: 10px;">
                                <input type="text" id="newUsername" placeholder="Tên đăng nhập mới" 
                                    style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                            </div>
                            <div style="margin-bottom: 10px;">
                                <input type="password" id="usernamePassword" placeholder="Mật khẩu hiện tại" 
                                    style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                            </div>
                            <button onclick="changeUsername()" style="display: block; margin: 0 auto; padding: 10px 20px;
                                background: #4CAF50; color: white; border: none; border-radius: 5px; cursor: pointer;">
                                Đổi tên đăng nhập
                            </button>
                            <div id="usernameMessage" style="text-align: center; margin-top: 10px; color: red;"></div>
                        </div>

                        <div style="margin: 20px 0; border-top: 1px solid #eee; padding-top: 20px;">
                            <h3 style="text-align: center; margin-bottom: 15px;">Đổi mật khẩu</h3>
                            <div style="margin-bottom: 10px;">
                                <input type="password" id="currentPassword" placeholder="Mật khẩu hiện tại" 
                                    style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                            </div>
                            <div style="margin-bottom: 10px;">
                                <input type="password" id="newPassword" placeholder="Mật khẩu mới" 
                                    style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                            </div>
                            <div style="margin-bottom: 15px;">
                                <input type="password" id="confirmPassword" placeholder="Xác nhận mật khẩu mới" 
                                    style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                            </div>
                            <button onclick="changePassword()" style="display: block; margin: 0 auto; padding: 10px 20px;
                                background: #4CAF50; color: white; border: none; border-radius: 5px; cursor: pointer;">
                                Đổi mật khẩu
                            </button>
                            <div id="passwordMessage" style="text-align: center; margin-top: 10px; color: red;"></div>
                        </div>

                        <button onclick="closeProfile()" style="display: block; margin: 0 auto; padding: 10px 20px;
                            background: #ff6b6b; color: white; border: none; border-radius: 5px; cursor: pointer;">
                            Đóng
                        </button>
                    </div>
                `;
                
                const overlay = document.createElement('div');
                overlay.style.position = 'fixed';
                overlay.style.top = '0';
                overlay.style.left = '0';
                overlay.style.width = '100%';
                overlay.style.height = '100%';
                overlay.style.background = 'rgba(0,0,0,0.5)';
                overlay.style.zIndex = '9999';
                overlay.id = 'profileOverlay';
                
                overlay.innerHTML = profileInfo;
                document.body.appendChild(overlay);
            }
        }
    }

    function changeUsername() {
        const newUsername = document.getElementById('newUsername').value;
        const password = document.getElementById('usernamePassword').value;
        const messageElement = document.getElementById('usernameMessage');

        // Reset message
        messageElement.textContent = '';
        messageElement.style.color = 'red';

        // Validate inputs
        if (!newUsername || !password) {
            messageElement.textContent = 'Vui lòng điền đầy đủ thông tin';
            return;
        }

        if (newUsername.length < 3) {
            messageElement.textContent = 'Tên đăng nhập phải có ít nhất 3 ký tự';
            return;
        }

        // Check if username already exists
        const users = JSON.parse(localStorage.getItem('users')) || [];
        const usernameExists = users.some(u => u.username === newUsername);
        if (usernameExists) {
            messageElement.textContent = 'Tên đăng nhập đã tồn tại';
            return;
        }

        // Get current user
        const currentUser = JSON.parse(localStorage.getItem('currentUser'));
        const userIndex = users.findIndex(u => u.id === currentUser.id);

        if (userIndex === -1) {
            messageElement.textContent = 'Không tìm thấy tài khoản';
            return;
        }

        // Verify password
        if (users[userIndex].password !== password) {
            messageElement.textContent = 'Mật khẩu không đúng';
            return;
        }

        // Update username
        users[userIndex].username = newUsername;
        localStorage.setItem('users', JSON.stringify(users));

        // Update current user
        currentUser.username = newUsername;
        localStorage.setItem('currentUser', JSON.stringify(currentUser));

        // Clear inputs and show success message
        document.getElementById('newUsername').value = '';
        document.getElementById('usernamePassword').value = '';
        
        messageElement.style.color = 'green';
        messageElement.textContent = 'Đổi tên đăng nhập thành công!';

        // Update displayed username
        const usernameDisplay = document.querySelector('strong:contains("Tên đăng nhập:")').nextSibling;
        if (usernameDisplay) {
            usernameDisplay.textContent = newUsername;
        }
    }

    function changePassword() {
        const currentPassword = document.getElementById('currentPassword').value;
        const newPassword = document.getElementById('newPassword').value;
        const confirmPassword = document.getElementById('confirmPassword').value;
        const messageElement = document.getElementById('passwordMessage');

        // Reset message
        messageElement.textContent = '';
        messageElement.style.color = 'red';

        // Validate inputs
        if (!currentPassword || !newPassword || !confirmPassword) {
            messageElement.textContent = 'Vui lòng điền đầy đủ thông tin';
            return;
        }

        if (newPassword !== confirmPassword) {
            messageElement.textContent = 'Mật khẩu mới không khớp';
            return;
        }

        if (newPassword.length < 6) {
            messageElement.textContent = 'Mật khẩu mới phải có ít nhất 6 ký tự';
            return;
        }

        // Get current user
        const currentUser = JSON.parse(localStorage.getItem('currentUser'));
        const users = JSON.parse(localStorage.getItem('users')) || [];
        const userIndex = users.findIndex(u => u.id === currentUser.id);

        if (userIndex === -1) {
            messageElement.textContent = 'Không tìm thấy tài khoản';
            return;
        }

        // Verify current password
        if (users[userIndex].password !== currentPassword) {
            messageElement.textContent = 'Mật khẩu hiện tại không đúng';
            return;
        }

        // Update password
        users[userIndex].password = newPassword;
        localStorage.setItem('users', JSON.stringify(users));

        // Clear inputs and show success message
        document.getElementById('currentPassword').value = '';
        document.getElementById('newPassword').value = '';
        document.getElementById('confirmPassword').value = '';
        
        messageElement.style.color = 'green';
        messageElement.textContent = 'Đổi mật khẩu thành công!';
    }

    function closeProfile() {
        const overlay = document.getElementById('profileOverlay');
        if (overlay) {
            overlay.remove();
        }
    }

    // Cập nhật số dư khi tải trang
    updateBalanceDisplay();

    // Cập nhật số dư mỗi 5 giây
    setInterval(updateBalanceDisplay, 5000);

    // Xử lý đăng xuất
    function logout() {
        localStorage.removeItem('currentUser');
        window.location.href = 'login.html';
    }

    // Xử lý menu mobile
    document.getElementById('mobile-menu-toggle').addEventListener('click', function() {
        document.getElementById('header-button-container').classList.toggle('active');
    });

    document.getElementById('close-menu').addEventListener('click', function() {
        document.getElementById('header-button-container').classList.remove('active');
    });

    // Chặn F12 và Ctrl+U
    document.addEventListener('keydown', function(e) {
        // Chặn F12
        if (e.key === 'F12' || (e.ctrlKey && e.shiftKey && e.key === 'I')) {
            e.preventDefault();
            return false;
        }
        // Chặn Ctrl+U
        if (e.ctrlKey && e.key === 'u') {
            e.preventDefault();
            return false;
        }
        // Chặn Ctrl+Shift+I
        if (e.ctrlKey && e.shiftKey && e.key === 'I') {
            e.preventDefault();
            return false;
        }
    });

    // Chặn click chuột phải
    document.addEventListener('contextmenu', function(e) {
        e.preventDefault();
        return false;
    });

    // Chặn mở DevTools bằng menu
    document.addEventListener('keydown', function(e) {
        if (e.ctrlKey && e.shiftKey && e.key === 'J') {
            e.preventDefault();
            return false;
        }
    });
</script>

</html>
